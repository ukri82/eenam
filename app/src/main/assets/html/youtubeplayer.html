<div id="player"></div>

<script src="https://www.youtube.com/player_api"></script>

<script>

    // create youtube player
    var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('player', {
          height: '200',
          width: '300',
          videoId: VideoFragment.getVideoId(),
          playerVars:{'autoplay':1,},
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange,
            'onError' : onError,
          }
        });
    }

    // error handling
    function onError(error)
    {

    }

    // autoplay video
    function onPlayerReady(event)
    {
        event.target.playVideo();
    }

    // when video ends
    function onPlayerStateChange(event)
    {
        if (event.data == -1) //    unstarted
        {
            //alert('loaded');
            VideoFragment.videoLoaded()
        }
        if(event.data === YT.PlayerState.ENDED)
        {
            //alert('done');
            VideoFragment.videoEnded()
        }
    }

</script>